(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{qdbj:function(t,e,n){"use strict";n.r(e),n.d(e,"SignInPageModule",function(){return x});var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),s=n("TEn/"),b=n("mrSG"),c=n("Jgta"),a=n("fXoL"),l=n("ej43"),u=n("UbJi"),d=n("I/3d"),h=n("+hHy"),g=n("6NWb");const m=["signIn"];function p(t,e){1&t&&a.Ob(0,"ion-progress-bar",23)}function f(t,e){1&t&&(a.Qb(0,"div",24),a.Qb(1,"p",25),a.tc(2," Sorry! Your mobile number is not registered with us. Please sign up to create account "),a.Pb(),a.Pb())}let P=(()=>{class t{constructor(t,e,n,o,i,r,s){this.router=t,this.alertController=e,this.formBuilder=n,this.authtenticationService=o,this.fbauth=i,this.fbstore=r,this.appService=s,this.OTP="",this.CountryCode="+91",this.showOTPInput=!1,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.showProgress=!1,this.invalidMobilenumber=!1,this.mobileNumberNotFound=!1}ngOnInit(){this.signInForm=new i.f({mobileNumber:new i.c("",i.r.required)})}ionViewDidEnter(){return Object(b.b)(this,void 0,void 0,function*(){this.recaptchaVerifier=new c.a.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:t=>{},"expired-callback":()=>{}})})}ionViewDidLoad(){this.recaptchaVerifier=new c.a.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:t=>{},"expired-callback":()=>{}})}signinWithPhoneNumber(t){this.showProgress=!0;const e=this.CountryCode+t.mobileNumber;10===t.mobileNumber.length&&(this.authfbObserver=this.fbauth.authState.subscribe(t=>{this.fbstore.collection("companys").snapshotChanges().subscribe(t=>{const n=t.filter(t=>t.payload.doc.data().mobileNumber===e);n.length>0?(console.log(n[0].payload.doc.data()),n[0].payload.doc.data()?(this.appService.docId=n[0].payload.doc.id,console.log(n[0].payload.doc.id),"PAID"===n[0].payload.doc.data().paymentStatus?(console.log("user did pay"),this.showProgress=!1,this.mobileNumberNotFound=!1,this.router.navigate(["/select-vehicle"])):(console.log("user did not pay"),this.showProgress=!1,this.mobileNumberNotFound=!1,this.router.navigate(["/payment"]))):(this.showProgress=!1,this.mobileNumberNotFound=!0,console.log("user not found in db"))):(this.showProgress=!1,this.mobileNumberNotFound=!0,console.log("user not found in db"))})}))}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.g),a.Nb(s.a),a.Nb(i.b),a.Nb(l.a),a.Nb(u.a),a.Nb(d.a),a.Nb(h.a))},t.\u0275cmp=a.Hb({type:t,selectors:[["app-signin"]],viewQuery:function(t,e){if(1&t&&a.xc(m,1),2&t){let t;a.lc(t=a.Zb())&&(e.signIn=t.first)}},decls:32,vars:4,consts:[[1,"osahan-header-nav","shadow-sm","p-3","d-flex","align-items-center","bg-purple"],[1,"font-weight-normal","mb-0","text-white"],["routerLink","/get-started",1,"text-purple"],["icon","arrow-left",1,"icofont-rounded-left"],["color","warning","type","indeterminate",4,"ngIf"],["id","content","fullscreen",""],["id","sign-in-button"],[1,"osahan-index","bg-c","align-items-center","justify-content-center","vh-100","index-page","py-5"],[1,"px-3"],[3,"formGroup"],["signIn",""],[1,"form-group","mb-4"],[1,"text-muted","mb-1"],["inputMode","tel","clearInput","true","formControlName","mobileNumber","autofocus","true","maxlength","10","minlength","10","placeholder","Ex: 9900000000",1,"form-control","rc-form-control","it-form-control","mt-4"],["type","submit","slot","end","fill","clear",1,"btn","btn-purple","btn-block","osahanbus-btn","mt-2",3,"disabled","click"],[1,"sign-or","d-flex","align-items-center","justify-content-center","mt-4","mb-2"],[1,"mr-4"],[1,"text-muted","text-center","py-2","m-0"],[1,"ml-4"],[1,"osahan-signin","text-center","text-purple","p-1"],[1,"m-0"],["routerLink","/select-language",1,"text-orange","ml-2"],["class","osahan-signin text-center p-1",4,"ngIf"],["color","warning","type","indeterminate"],[1,"osahan-signin","text-center","p-1"],[1,"m-5","pt-2","text-danger"]],template:function(t,e){1&t&&(a.Qb(0,"ion-header"),a.Qb(1,"div",0),a.Qb(2,"h5",1),a.Qb(3,"a",2),a.Ob(4,"fa-icon",3),a.Pb(),a.Qb(5,"ion-title"),a.tc(6,"Sign In"),a.Pb(),a.Pb(),a.Pb(),a.rc(7,p,1,0,"ion-progress-bar",4),a.Pb(),a.Qb(8,"ion-content",5),a.Ob(9,"div",6),a.Qb(10,"div",7),a.Qb(11,"div",8),a.Qb(12,"form",9,10),a.Qb(14,"ion-list"),a.Qb(15,"div",11),a.Qb(16,"ion-label",12),a.tc(17,"Mobile Number"),a.Pb(),a.Ob(18,"ion-input",13),a.Pb(),a.Pb(),a.Qb(19,"button",14),a.Yb("click",function(){return e.signinWithPhoneNumber(e.signInForm.value)}),a.tc(20," SIGN IN "),a.Pb(),a.Pb(),a.Qb(21,"div",15),a.Ob(22,"hr",16),a.Qb(23,"p",17),a.tc(24,"OR"),a.Pb(),a.Ob(25,"hr",18),a.Pb(),a.Qb(26,"div",19),a.Qb(27,"p",20),a.tc(28," Not a member ? "),a.Qb(29,"a",21),a.tc(30,"Sign Up"),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.rc(31,f,3,0,"div",22),a.Pb(),a.Pb()),2&t&&(a.Cb(7),a.gc("ngIf",e.showProgress),a.Cb(5),a.gc("formGroup",e.signInForm),a.Cb(7),a.gc("disabled",!e.signInForm.valid),a.Cb(12),a.gc("ngIf",e.mobileNumberNotFound))},directives:[s.g,r.i,s.z,g.a,s.u,o.j,s.e,i.s,i.n,i.g,s.l,s.k,s.h,s.B,i.m,i.e,i.i,i.j,s.n],styles:[".google-btn[_ngcontent-%COMP%]{border-color:#507cc0;color:#507cc0!important}.fb-btn[_ngcontent-%COMP%], .google-btn[_ngcontent-%COMP%]{background-color:#fff}.fb-btn[_ngcontent-%COMP%]{border-color:#df4930;color:#df4930!important}.sign-or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:130px;border-top:1px solid #dee2e6}"]}),t})();const N=[{path:"",component:P}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({imports:[[r.j.forChild(N)],r.j]}),t})();const w=[o.b,i.h,s.v,i.p,r.j.forChild([{path:"",component:P}]),g.c,v],y=[];let x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({providers:y,imports:[w]}),t})()}}]);