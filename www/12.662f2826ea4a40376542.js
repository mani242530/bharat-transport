(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{OkqA:function(t,e,i){"use strict";i.r(e),i.d(e,"ListingPageModule",function(){return S});var o=i("ofXK"),n=i("3Pt+"),c=i("tyNb"),s=i("TEn/"),a=i("mrSG"),r=i("LRne"),b=i("D0XW"),l=i("7o/Q"),d=i("WMd4");class h{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new u(t,this.delay,this.scheduler))}}class u extends l.a{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,o=t.scheduler,n=t.destination;for(;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(n);if(i.length>0){const e=Math.max(0,i[0].time-o.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(u.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new f(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(d.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(d.a.createComplete()),this.unsubscribe()}}class f{constructor(t,e){this.time=t,this.notification=e}}var p=i("fXoL"),m=i("+hHy"),g=i("I/3d"),P=i("2g2N"),y=i("UbJi"),v=i("6NWb"),L=i("sYmb");const N=function(t){return["/listing-detail/",t]};function Q(t,e){if(1&t&&(p.Qb(0,"ion-item-sliding",26),p.Qb(1,"div",27),p.Qb(2,"div",28),p.Qb(3,"small",29),p.tc(4),p.bc(5,"translate"),p.Pb(),p.Qb(6,"p",30),p.tc(7),p.Pb(),p.Pb(),p.Qb(8,"ion-item",31),p.Ob(9,"fa-icon",32),p.Qb(10,"ion-label"),p.Qb(11,"h2"),p.tc(12),p.bc(13,"translate"),p.Pb(),p.Qb(14,"p"),p.tc(15),p.Pb(),p.Pb(),p.Ob(16,"fa-icon",33),p.Pb(),p.Pb(),p.Pb()),2&t){const t=e.$implicit;p.Cb(4),p.uc(p.cc(5,5,"APP.LISTING.LABEL.COMPANY_NAME")),p.Cb(3),p.vc("",t.companyName," "),p.Cb(5),p.uc(p.cc(13,7,"APP.LISTING.LABEL.MOBILE")),p.Cb(3),p.vc(" ",t.mobileNumber," "),p.Cb(1),p.gc("routerLink",p.kc(9,N,t.id))}}function C(t,e){if(1&t&&(p.Qb(0,"ion-list",24),p.rc(1,Q,17,11,"ion-item-sliding",25),p.Pb()),2&t){const t=p.ac();p.Cb(1),p.gc("ngForOf",t.companyLists)}}function w(t,e){1&t&&(p.Qb(0,"ion-item-sliding"),p.Qb(1,"ion-item",24),p.Qb(2,"ion-label"),p.Qb(3,"h3"),p.Ob(4,"ion-skeleton-text",35),p.Pb(),p.Qb(5,"p"),p.Ob(6,"ion-skeleton-text",36),p.Pb(),p.Pb(),p.Pb(),p.Pb())}function x(t,e){if(1&t&&(p.Qb(0,"ion-list",24),p.rc(1,w,7,0,"ion-item-sliding",34),p.Pb()),2&t){const t=p.ac();p.Cb(1),p.gc("ngForOf",t.companys)}}function O(t,e){1&t&&(p.Qb(0,"div",37),p.Qb(1,"span",38),p.tc(2),p.bc(3,"translate"),p.Pb(),p.Pb()),2&t&&(p.Cb(2),p.uc(p.cc(3,1,"APP.LISTING.LOADING")))}function I(t,e){1&t&&(p.Qb(0,"div",39),p.Qb(1,"span"),p.tc(2),p.bc(3,"translate"),p.Pb(),p.Pb()),2&t&&(p.Cb(2),p.uc(p.cc(3,1,"APP.LISTING.NO_RESULTS")))}const k=function(t){return["/profile/",t]};let T=(()=>{class t{constructor(t,e,i,o,n,c,s){this.modalController=t,this.router=e,this.appService=i,this.ngroute=o,this.fbstore=n,this.toastservice=c,this.fbauth=s,this.isLoading=!0,this.noresults=!1,this.isLoading=!0,this.docId=this.appService.docId,this.router.queryParams.subscribe(t=>{console.log(t),this.searchParam=t,this.searchContactByLocation(this.searchParam)}),this.selectedVehicleType=this.appService.selectedVehicleType}ngOnInit(){return Object(a.b)(this,void 0,void 0,function*(){})}trackByFn(t,e){return e.id}checkThisList(t,e){let i=!1;return-1!=e.indexOf(t)&&(i=!0),i}searchContactByLocation(t){return Object(a.b)(this,void 0,void 0,function*(){try{yield this.fbstore.collection("companys").snapshotChanges().subscribe(e=>{let i=[];for(let t of e)this.checkThisList(this.selectedVehicleType,t.payload.doc.data().vehicleType)&&i.push(t);const o=i.filter(function(e){return e.payload.doc.data().location===t.from});let n=[];for(let s of o)this.checkThisList(t.to,s.payload.doc.data().serviceProvidedLocation)&&n.push(s);const c=n.filter(function(e){return e.payload.doc.data().firmActivity===t.firmActivity});c.length>0?(console.log(c),this.noresults=!1,this.companys=c.map(t=>({id:t.payload.doc.id,companyName:t.payload.doc.data().companyName,ownerName:t.payload.doc.data().ownerName,firmActivity:t.payload.doc.data().firmActivity,vehicleType:t.payload.doc.data().vehicleType,landlineNumber:t.payload.doc.data().landlineNumber,mobileNumber:t.payload.doc.data().mobileNumber,alternateMobileNumber:t.payload.doc.data().alternateMobileNumber,location:t.payload.doc.data().location,serviceProvidedLocation:t.payload.doc.data().serviceProvidedLocation,referenceName:t.payload.doc.data().referenceName})),this.companyLists=this.companys,this.finalResultForCompanys=this.companys):this.noresults=!0,Object(r.a)(e).pipe(function(t,e=b.a){var i;const o=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return t=>t.lift(new h(o,e))}(1e3)).subscribe(t=>{this.isLoading=!1})})}catch(e){this.toastservice.showToast(e.message,2e3)}})}setFilteredItems(t){return Object(a.b)(this,void 0,void 0,function*(){console.log("before",this.finalResultForCompanys);const e=this.finalResultForCompanys.filter(e=>-1!==e.companyName.toLowerCase().indexOf(t.target.value.toLowerCase()));this.companyLists=e,console.log("after",this.companyLists)})}doLogout(){return Object(a.b)(this,void 0,void 0,function*(){yield this.fbauth.signOut().then(()=>{this.appService.selectedLanguage="",this.ngroute.navigate(["splash"])})})}}return t.\u0275fac=function(e){return new(e||t)(p.Nb(s.x),p.Nb(c.a),p.Nb(m.a),p.Nb(c.g),p.Nb(g.a),p.Nb(P.a),p.Nb(y.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["app-listing"]],decls:41,vars:22,consts:[[1,"osahan-header-nav","shadow-sm","p-3","d-flex","align-items-center","bg-purple"],[1,"font-weight-normal","mb-0","text-white"],["routerLink","/home",1,"text-purple"],["icon","arrow-left",1,"icofont-rounded-left"],[1,"ml-auto","d-flex","align-items-center"],["slot","end"],[3,"routerLink"],["icon","user-circle",1,"icofont-user-circle",2,"color","#ffffff","font-size","26px"],[2,"margin-left","20px",3,"click"],["icon","sign-out-alt",1,"sign-out-alt",2,"color","#ffffff","font-size","26px"],["id","content","fullscreen",""],[1,"osahan-listing","p-0","m-0","row","border-top"],[1,"p-2","w-100"],[1,"bg-white","border","border-warning","rounded-1","shadow-sm","p-2"],[1,"row","mx-0","px-1"],[1,"col-6","p-0"],[1,"text-muted","mb-1","f-10","pr-1"],[1,"small","mb-0"],[1,"col-12","p-0"],["placeholder","Filter by Company Name",3,"keyup"],["lines","none",4,"ngIf"],[1,"d-flex","justify-content-center"],["class","spinner-grow d-flex justify-content-center","role","status",4,"ngIf"],["class","d-flex justify-content-center text-danger mt-5",4,"ngIf"],["lines","none"],["class","text-dark px-0 py-0",4,"ngFor","ngForOf"],[1,"text-dark","px-0","py-0"],[1,"list_item_gird","m-1","bg-white","shadow-sm","listing-item","border-right","p-3"],[1,"tic-div","mb-2"],[1,"text-muted","d-block"],[1,"mb-0","l-hght-10"],[1,"top-border-line"],["icon","phone-alt",1,"phone-alt",2,"font-size","24px","margin-right","20px","color","#5f259f !important"],["icon","angle-double-right",1,"angle-double-right",3,"routerLink"],[4,"ngFor","ngForOf"],["animated","",2,"width","30%"],["animated","",2,"width","75%"],["role","status",1,"spinner-grow","d-flex","justify-content-center"],[1,"sr-only"],[1,"d-flex","justify-content-center","text-danger","mt-5"]],template:function(t,e){1&t&&(p.Qb(0,"ion-header"),p.Qb(1,"div",0),p.Qb(2,"h5",1),p.Qb(3,"a",2),p.Ob(4,"fa-icon",3),p.Pb(),p.Qb(5,"ion-title"),p.tc(6),p.bc(7,"translate"),p.Pb(),p.Pb(),p.Qb(8,"div",4),p.Qb(9,"ion-buttons",5),p.Qb(10,"a",6),p.Ob(11,"fa-icon",7),p.Pb(),p.Qb(12,"a",8),p.Yb("click",function(){return e.doLogout()}),p.Ob(13,"fa-icon",9),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(14,"ion-content",10),p.Qb(15,"div",11),p.Qb(16,"div",12),p.Qb(17,"div",13),p.Qb(18,"div",14),p.Qb(19,"div",15),p.Qb(20,"small",16),p.tc(21),p.bc(22,"translate"),p.Pb(),p.Qb(23,"p",17),p.tc(24),p.bc(25,"uppercase"),p.Pb(),p.Pb(),p.Qb(26,"div",15),p.Qb(27,"small",16),p.tc(28),p.bc(29,"translate"),p.Pb(),p.Qb(30,"p",17),p.tc(31),p.bc(32,"uppercase"),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(33,"div",14),p.Qb(34,"div",18),p.Qb(35,"ion-searchbar",19),p.Yb("keyup",function(t){return e.setFilteredItems(t)}),p.Pb(),p.Pb(),p.Pb(),p.rc(36,C,2,1,"ion-list",20),p.rc(37,x,2,1,"ion-list",20),p.Qb(38,"div",21),p.rc(39,O,4,3,"div",22),p.Pb(),p.rc(40,I,4,3,"div",23),p.Pb()),2&t&&(p.Cb(6),p.uc(p.cc(7,10,"APP.LISTING.TITLE")),p.Cb(4),p.gc("routerLink",p.kc(20,k,e.docId)),p.Cb(11),p.uc(p.cc(22,12,"APP.LISTING.LABEL.GOING_FROM")),p.Cb(3),p.uc(p.cc(25,14,e.searchParam.from)),p.Cb(4),p.uc(p.cc(29,16,"APP.LISTING.LABEL.GOING_TO")),p.Cb(3),p.uc(p.cc(32,18,e.searchParam.to)),p.Cb(5),p.gc("ngIf",!e.isLoading),p.Cb(1),p.gc("ngIf",e.isLoading),p.Cb(2),p.gc("ngIf",e.isLoading),p.Cb(1),p.gc("ngIf",e.noresults))},directives:[s.g,c.i,s.z,v.a,s.u,s.c,s.e,s.q,s.B,o.j,s.l,o.i,s.j,s.i,s.k,c.h,s.t],pipes:[L.c,o.n],styles:[".google-btn[_ngcontent-%COMP%]{border-color:#507cc0;color:#507cc0!important}.fb-btn[_ngcontent-%COMP%], .google-btn[_ngcontent-%COMP%]{background-color:#fff}.fb-btn[_ngcontent-%COMP%]{border-color:#df4930;color:#df4930!important}.sign-or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:130px;border-top:1px solid #dee2e6}"]}),t})();const A=[{path:"",component:T}];let j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({imports:[[c.j.forChild(A)],c.j]}),t})();var _=i("HWWf");const M=[o.b,n.h,s.v,c.j.forChild([{path:"",component:T}]),v.c,n.p,_.b,j,L.b],F=[];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({providers:F,imports:[M]}),t})()}}]);