(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{qdbj:function(e,t,n){"use strict";n.r(t),n.d(t,"SignInPageModule",function(){return Q});var o=n("ofXK"),i=n("3Pt+"),r=n("tyNb"),s=n("TEn/"),b=n("mrSG"),c=n("Jgta"),a=n("fXoL"),l=n("ej43"),u=n("UbJi"),d=n("I/3d"),h=n("+hHy"),m=n("6NWb");const p=["signIn"];function g(e,t){1&e&&a.Ob(0,"ion-progress-bar",23)}function f(e,t){if(1&e&&(a.Rb(0,"div",24),a.Rb(1,"p",25),a.uc(2),a.Qb(),a.Qb()),2&e){const e=a.bc();a.Cb(2),a.wc(" ",e.tryagain," ")}}function v(e,t){1&e&&(a.Rb(0,"div",24),a.Rb(1,"p",25),a.uc(2," Sorry! Your mobile number is not registered with us. Please sign up to create account "),a.Qb(),a.Qb())}let y=(()=>{class e{constructor(e,t,n,o,i,r,s){this.router=e,this.alertController=t,this.formBuilder=n,this.authtenticationService=o,this.fbauth=i,this.fbstore=r,this.appService=s,this.OTP="",this.CountryCode="+91",this.showOTPInput=!1,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.showProgress=!1,this.invalidMobilenumber=!1,this.mobileNumberNotFound=!1}ngOnInit(){this.signInForm=new i.f({mobileNumber:new i.c("",i.r.required)})}ionViewDidEnter(){return Object(b.b)(this,void 0,void 0,function*(){this.recaptchaVerifier=new c.a.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:e=>{},"expired-callback":()=>{}})})}ionViewDidLoad(){this.recaptchaVerifier=new c.a.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:e=>{},"expired-callback":()=>{}})}signinWithPhoneNumber(e){this.showProgress=!0;const t=this.CountryCode+e.mobileNumber;10===e.mobileNumber.length&&(this.authfbObserver=this.fbauth.authState.subscribe(e=>{this.fbstore.collection("companys").snapshotChanges().subscribe(e=>{const n=e.filter(e=>e.payload.doc.data().mobileNumber===t);n.length>0?(console.log(n[0].payload.doc.data()),n[0].payload.doc.data()?(this.appService.docId=n[0].payload.doc.id,this.appService.userSelectedFirmActivity=n[0].payload.doc.data().firmActivity,console.log(this.appService.userSelectedFirmActivity),console.log(n[0].payload.doc.id),"PAID"===n[0].payload.doc.data().paymentStatus?(console.log("user did pay"),this.showProgress=!1,this.mobileNumberNotFound=!1,this.router.navigate(["/select-vehicle"])):(console.log("user did not pay"),this.showProgress=!1,this.mobileNumberNotFound=!1,this.router.navigate(["/payment"]))):(this.showProgress=!1,this.mobileNumberNotFound=!0,console.log("user not found in db"))):(this.showProgress=!1,this.mobileNumberNotFound=!0,console.log("user not found in db"))})}))}}return e.\u0275fac=function(t){return new(t||e)(a.Nb(r.g),a.Nb(s.a),a.Nb(i.b),a.Nb(l.a),a.Nb(u.a),a.Nb(d.a),a.Nb(h.a))},e.\u0275cmp=a.Hb({type:e,selectors:[["app-signin"]],viewQuery:function(e,t){if(1&e&&a.yc(p,1),2&e){let e;a.mc(e=a.ac())&&(t.signIn=e.first)}},decls:33,vars:5,consts:[[1,"osahan-header-nav","shadow-sm","p-3","d-flex","align-items-center","bg-purple"],[1,"font-weight-normal","mb-0","text-white"],["routerLink","/get-started",1,"text-purple"],["icon","arrow-left",1,"icofont-rounded-left"],["color","warning","type","indeterminate",4,"ngIf"],["id","content","fullscreen",""],["id","sign-in-button"],[1,"osahan-index","bg-c","align-items-center","justify-content-center","vh-100","index-page","py-5"],[1,"px-3"],[3,"formGroup"],["signIn",""],[1,"form-group","mb-4"],[1,"text-muted","mb-1"],["inputMode","tel","clearInput","true","formControlName","mobileNumber","autofocus","true","maxlength","10","minlength","10","placeholder","Enter 10 digit mobile number",1,"form-control","rc-form-control","it-form-control","mt-4"],["type","submit","slot","end","fill","clear",1,"btn","btn-purple","btn-block","osahanbus-btn","mt-2",3,"disabled","click"],[1,"sign-or","d-flex","align-items-center","justify-content-center","mt-4","mb-2"],[1,"mr-4"],[1,"text-muted","text-center","py-2","m-0"],[1,"ml-4"],[1,"osahan-signin","text-center","text-purple","p-1"],[1,"m-0"],["routerLink","/select-language",1,"text-orange","ml-2"],["class","osahan-signin text-center p-1",4,"ngIf"],["color","warning","type","indeterminate"],[1,"osahan-signin","text-center","p-1"],[1,"m-5","pt-2","text-danger"]],template:function(e,t){1&e&&(a.Rb(0,"ion-header"),a.Rb(1,"div",0),a.Rb(2,"h5",1),a.Rb(3,"a",2),a.Ob(4,"fa-icon",3),a.Qb(),a.Rb(5,"ion-title"),a.uc(6,"Sign In"),a.Qb(),a.Qb(),a.Qb(),a.sc(7,g,1,0,"ion-progress-bar",4),a.Qb(),a.Rb(8,"ion-content",5),a.Ob(9,"div",6),a.Rb(10,"div",7),a.Rb(11,"div",8),a.Rb(12,"form",9,10),a.Rb(14,"ion-list"),a.Rb(15,"div",11),a.Rb(16,"ion-label",12),a.uc(17,"Mobile Number"),a.Qb(),a.Ob(18,"ion-input",13),a.Qb(),a.Qb(),a.Rb(19,"button",14),a.Zb("click",function(){return t.signinWithPhoneNumber(t.signInForm.value)}),a.uc(20," SIGN IN "),a.Qb(),a.Qb(),a.Rb(21,"div",15),a.Ob(22,"hr",16),a.Rb(23,"p",17),a.uc(24,"OR"),a.Qb(),a.Ob(25,"hr",18),a.Qb(),a.Rb(26,"div",19),a.Rb(27,"p",20),a.uc(28," Not a member ? "),a.Rb(29,"a",21),a.uc(30,"Sign Up"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.sc(31,f,3,1,"div",22),a.sc(32,v,3,0,"div",22),a.Qb(),a.Qb()),2&e&&(a.Cb(7),a.hc("ngIf",t.showProgress),a.Cb(5),a.hc("formGroup",t.signInForm),a.Cb(7),a.hc("disabled",!t.signInForm.valid),a.Cb(12),a.hc("ngIf",t.invalidMobilenumber),a.Cb(1),a.hc("ngIf",t.mobileNumberNotFound))},directives:[s.g,r.i,s.z,m.a,s.u,o.j,s.e,i.s,i.n,i.g,s.l,s.k,s.h,s.B,i.m,i.e,i.i,i.j,s.n],styles:[".google-btn[_ngcontent-%COMP%]{border-color:#507cc0;color:#507cc0!important}.fb-btn[_ngcontent-%COMP%], .google-btn[_ngcontent-%COMP%]{background-color:#fff}.fb-btn[_ngcontent-%COMP%]{border-color:#df4930;color:#df4930!important}.sign-or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:130px;border-top:1px solid #dee2e6}"]}),e})();const w=[{path:"",component:y}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({imports:[[r.j.forChild(w)],r.j]}),e})();const R=[o.b,i.h,s.v,i.p,r.j.forChild([{path:"",component:y}]),m.c,N],P=[];let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Lb({type:e}),e.\u0275inj=a.Kb({providers:P,imports:[R]}),e})()}}]);