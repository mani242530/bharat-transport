(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"0qXx":function(e,t,o){"use strict";o.r(t),o.d(t,"SignUpPageModule",function(){return L});var r=o("ofXK"),n=o("3Pt+"),c=o("tyNb"),i=o("TEn/"),a=o("mrSG"),l=o("wEno");class s{}var b=o("Jgta"),m=o("fXoL"),u=o("2g2N"),C=o("I/3d"),P=o("ej43"),p=o("+hHy"),d=o("6NWb"),h=o("sYmb");const E=["createForm"];function f(e,t){1&e&&m.Ob(0,"ion-progress-bar",35)}function g(e,t){if(1&e&&(m.Qb(0,"ion-select-option",36),m.bc(1,"translate"),m.bc(2,"translate"),m.tc(3),m.bc(4,"translate"),m.Pb()),2&e){const e=t.$implicit;m.hc("value",m.cc(1,3,e)),m.hc("title",m.cc(2,5,e)),m.Cb(3),m.uc(m.cc(4,7,e))}}function A(e,t){if(1&e&&(m.Qb(0,"ion-select-option",37),m.bc(1,"translate"),m.bc(2,"translate"),m.tc(3),m.bc(4,"translate"),m.Pb()),2&e){const e=t.$implicit;m.hc("value",m.cc(1,3,e.name)),m.hc("title",m.cc(2,5,e.name)),m.Cb(3),m.uc(m.cc(4,7,e.name))}}function T(e,t){1&e&&(m.Qb(0,"div",38),m.Qb(1,"p",39),m.tc(2),m.bc(3,"translate"),m.Pb(),m.Pb()),2&e&&(m.Cb(2),m.vc(" ",m.cc(3,1,"APP.CREATE_ACCOUNT.INVALID_MOBILE")," "))}function v(e,t){1&e&&(m.Qb(0,"div",38),m.Qb(1,"p",40),m.tc(2),m.bc(3,"translate"),m.Pb(),m.Pb()),2&e&&(m.Cb(2),m.vc(" ",m.cc(3,1,"APP.CREATE_ACCOUNT.MOBILE_EXISTS")," "))}let N=(()=>{class e{constructor(e,t,o,r,n,c,i){this.addnewFormbuilder=e,this.toastservice=t,this.ngroute=o,this.fbstore=r,this.toastController=n,this.authtenticationService=c,this.appservice=i,this.newCompany=new s,this.OTP="",this.CountryCode="+91",this.showOTPInput=!1,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.showProgress=!1,this.invalidMobilenumber=!1,this.userExists=!1,this.vehicleTypes=["APP.VEHICLE_TYPE.LCV","APP.VEHICLE_TYPE.TRAILER","APP.VEHICLE_TYPE.TRUCK","APP.VEHICLE_TYPE.OPEN_TRUCK","APP.VEHICLE_TYPE.20_FT_CBT","APP.VEHICLE_TYPE.32_FT_SINGLE_EXCEL","APP.VEHICLE_TYPE.20_FT_IMPORT_EXPORT","APP.VEHICLE_TYPE.40_FT_IMPORT_EXPORT","APP.VEHICLE_TYPE.32_FT_MULTI_AXLE"],this.locations=[]}ngOnInit(){this.locations=l.a,this.initializeForm()}initializeForm(){this.createCompanyForm=new n.f({firstName:new n.c("",n.r.required),lastName:new n.c("",n.r.required),companyName:new n.c("",n.r.required),firmActivity:new n.c("",n.r.required),serviceProviding:new n.c("",n.r.required),landlineNumber:new n.c(""),mobileNumber:new n.c("",n.r.required),location:new n.c("",n.r.required)})}ionViewDidEnter(){return Object(a.b)(this,void 0,void 0,function*(){this.recaptchaVerifier=new b.a.auth.RecaptchaVerifier("sign-UP-button",{size:"invisible",callback:e=>{},"expired-callback":()=>{}})})}ionViewDidLoad(){this.recaptchaVerifier=new b.a.auth.RecaptchaVerifier("sign-UP-button",{size:"invisible",callback:e=>{},"expired-callback":()=>{}})}createCompany(e){return Object(a.b)(this,void 0,void 0,function*(){this.showProgress=!0;const e={firstName:this.createCompanyForm.get("firstName").value,lastName:this.createCompanyForm.get("lastName").value,companyName:this.createCompanyForm.get("companyName").value,firmActivity:this.createCompanyForm.get("firmActivity").value,serviceProviding:this.createCompanyForm.get("serviceProviding").value,landlineNumber:this.createCompanyForm.get("landlineNumber").value,mobileNumber:"+91"+this.createCompanyForm.get("mobileNumber").value,location:this.createCompanyForm.get("location").value,language:this.appservice.selectedLanguage,paymentStatus:"Not Paid"};Object.keys(e).forEach(t=>{"object"!=typeof e[t]&&(e[t]=e[t].trim())}),this.fbstore.collection("companys",t=>t.where("mobileNumber","==",e.mobileNumber).limit(1)).get().subscribe(t=>{if(console.log(t.size),0===t.size)try{this.fbstore.collection("companys").add(e).then(t=>{if(console.log(e),t)return new Promise((t,o)=>{this.authtenticationService.signInWithPhoneNumber(this.recaptchaVerifier,e.mobileNumber).then(e=>{t(e),this.showProgress=!1,this.invalidMobilenumber=!1,this.registerSuccessToast(),this.ngroute.navigate(["verification"])}).catch(e=>{this.showProgress=!1,this.invalidMobilenumber=!0,o(e)})})})}catch(o){this.showProgress=!1,console.log(o)}else this.showProgress=!1,this.userRegisteredAlreadyToast(),this.userExists=!0})})}registerSuccessToast(){return Object(a.b)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Account created successfully.",duration:2e3,position:"bottom",animated:!0,color:"Success"})).present()})}userRegisteredAlreadyToast(){return Object(a.b)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Your mobile number is already registered.",duration:2e3,position:"top",animated:!0,color:"warning"})).present()})}}return e.\u0275fac=function(t){return new(t||e)(m.Nb(n.b),m.Nb(u.a),m.Nb(c.g),m.Nb(C.a),m.Nb(i.C),m.Nb(P.a),m.Nb(p.a))},e.\u0275cmp=m.Hb({type:e,selectors:[["app-signup"]],viewQuery:function(e,t){if(1&e&&m.xc(E,1),2&e){let e;m.lc(e=m.Zb())&&(t.createForm=e.first)}},decls:72,vars:58,consts:[[1,"osahan-header-nav","shadow-sm","p-3","d-flex","align-items-center","bg-purple"],[1,"font-weight-normal","mb-0","text-white"],["routerLink","/get-started",1,"text-purple"],["icon","arrow-left",1,"icofont-rounded-left"],["color","warning","type","indeterminate",4,"ngIf"],["id","content","fullscreen",""],["id","sign-UP-button"],[1,"osahan-index","bg-c","align-items-center","justify-content-center","vh-100","index-page"],[1,"px-3","py-3"],[3,"formGroup"],["createForm",""],[1,"form-group","mb-4"],["inputMode","text","clearInput","true","formControlName","firstName","required","",1,"form-control","rc-form-control","it-form-control",3,"placeholder"],["inputMode","text","clearInput","true","formControlName","lastName","required","",1,"form-control","rc-form-control","it-form-control",3,"placeholder"],["inputMode","text","clearInput","true","formControlName","companyName","required","",1,"form-control","rc-form-control","it-form-control",3,"placeholder"],["interface","popover","role","combobox","slot","","formControlName","firmActivity","required","",1,"form-control","rc-form-control","native-select","it-form-control",3,"placeholder"],["value","Freight Forwarders"],["value","Booking"],["value","Supplier"],["value","Owner"],["multiple","true","formControlName","serviceProviding","cancelText","cancel","okText","ok",1,"form-control","rc-form-control","native-select","it-form-control",3,"placeholder"],["selected","false",3,"value","title",4,"ngFor","ngForOf"],["interface","popover","formControlName","location","required","",1,"form-control","rc-form-control","native-select","it-form-control",3,"placeholder"],[3,"value","title",4,"ngFor","ngForOf"],["inputMode","tel","clearInput","true","formControlName","mobileNumber","required","","maxlength","10","minlength","10",1,"form-control","rc-form-control","it-form-control",3,"placeholder"],["inputMode","tel","clearInput","true","formControlName","landlineNumber",1,"form-control","rc-form-control","it-form-control",3,"placeholder"],["type","submit","slot","end","fill","clear",1,"btn","btn-purple","btn-block","osahanbus-btn","mt-2",3,"disabled","click"],[1,"sign-or","d-flex","align-items-center","justify-content-center","mt-4","mb-2"],[1,"mr-4"],[1,"text-muted","text-center","py-2","m-0"],[1,"ml-4"],[1,"osahan-signin","text-center","text-purple","p-1"],[1,"mb-4"],["routerLink","/signin",1,"text-orange","ml-2"],["class","osahan-signin text-center text-muted p-1",4,"ngIf"],["color","warning","type","indeterminate"],["selected","false",3,"value","title"],[3,"value","title"],[1,"osahan-signin","text-center","text-muted","p-1"],[1,"pt-2","text-danger"],[1,"pt-2","text-info"]],template:function(e,t){1&e&&(m.Qb(0,"ion-header"),m.Qb(1,"div",0),m.Qb(2,"h5",1),m.Qb(3,"a",2),m.Ob(4,"fa-icon",3),m.Pb(),m.Qb(5,"ion-title"),m.tc(6),m.bc(7,"translate"),m.Pb(),m.Pb(),m.Pb(),m.rc(8,f,1,0,"ion-progress-bar",4),m.Pb(),m.Qb(9,"ion-content",5),m.Ob(10,"div",6),m.Qb(11,"div",7),m.Qb(12,"div",8),m.Qb(13,"form",9,10),m.Qb(15,"ion-list"),m.Qb(16,"div",11),m.Ob(17,"ion-input",12),m.bc(18,"translate"),m.Pb(),m.Qb(19,"div",11),m.Ob(20,"ion-input",13),m.bc(21,"translate"),m.Pb(),m.Qb(22,"div",11),m.Ob(23,"ion-input",14),m.bc(24,"translate"),m.Pb(),m.Qb(25,"div",11),m.Qb(26,"ion-select",15),m.bc(27,"translate"),m.Qb(28,"ion-select-option",16),m.tc(29),m.bc(30,"translate"),m.Pb(),m.Qb(31,"ion-select-option",17),m.tc(32),m.bc(33,"translate"),m.Pb(),m.Qb(34,"ion-select-option",18),m.tc(35),m.bc(36,"translate"),m.Pb(),m.Qb(37,"ion-select-option",19),m.tc(38),m.bc(39,"translate"),m.Pb(),m.Pb(),m.Pb(),m.Qb(40,"div",11),m.Qb(41,"ion-select",20),m.bc(42,"translate"),m.rc(43,g,5,9,"ion-select-option",21),m.Pb(),m.Pb(),m.Qb(44,"div",11),m.Qb(45,"ion-select",22),m.bc(46,"translate"),m.rc(47,A,5,9,"ion-select-option",23),m.Pb(),m.Pb(),m.Qb(48,"div",11),m.Ob(49,"ion-input",24),m.bc(50,"translate"),m.Pb(),m.Qb(51,"div",11),m.Ob(52,"ion-input",25),m.bc(53,"translate"),m.Pb(),m.Pb(),m.Qb(54,"button",26),m.Yb("click",function(){return t.createCompany(t.createCompanyForm.value)}),m.tc(55),m.bc(56,"translate"),m.Pb(),m.Pb(),m.Qb(57,"div",27),m.Ob(58,"hr",28),m.Qb(59,"p",29),m.tc(60),m.bc(61,"translate"),m.Pb(),m.Ob(62,"hr",30),m.Pb(),m.Qb(63,"div",31),m.Qb(64,"p",32),m.tc(65),m.bc(66,"translate"),m.Qb(67,"a",33),m.tc(68),m.bc(69,"translate"),m.Pb(),m.Pb(),m.Pb(),m.rc(70,T,4,3,"div",34),m.rc(71,v,4,3,"div",34),m.Pb(),m.Pb(),m.Pb()),2&e&&(m.Cb(6),m.uc(m.cc(7,24,"APP.CREATE_ACCOUNT.HEADER")),m.Cb(2),m.gc("ngIf",t.showProgress),m.Cb(5),m.gc("formGroup",t.createCompanyForm),m.Cb(4),m.hc("placeholder",m.cc(18,26,"APP.CREATE_ACCOUNT.PLACEHOLDER.FIRST_NAME")),m.Cb(3),m.hc("placeholder",m.cc(21,28,"APP.CREATE_ACCOUNT.PLACEHOLDER.LAST_NAME")),m.Cb(3),m.hc("placeholder",m.cc(24,30,"APP.CREATE_ACCOUNT.PLACEHOLDER.COMPANY_NAME")),m.Cb(3),m.hc("placeholder",m.cc(27,32,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_FIRM_ACTIVITY")),m.Cb(3),m.uc(m.cc(30,34,"APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.FREIGHT")),m.Cb(3),m.uc(m.cc(33,36,"APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.BOOKING")),m.Cb(3),m.uc(m.cc(36,38,"APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.SUPPLIER")),m.Cb(3),m.uc(m.cc(39,40,"APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.OWNER")),m.Cb(3),m.hc("placeholder",m.cc(42,42,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_SERVICE_PROVIDING")),m.Cb(2),m.gc("ngForOf",t.vehicleTypes),m.Cb(2),m.hc("placeholder",m.cc(46,44,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_LOCATION")),m.Cb(2),m.gc("ngForOf",t.locations),m.Cb(2),m.hc("placeholder",m.cc(50,46,"APP.CREATE_ACCOUNT.PLACEHOLDER.MOBILE_NUMBER")),m.Cb(3),m.hc("placeholder",m.cc(53,48,"APP.CREATE_ACCOUNT.PLACEHOLDER.LANDLINE_NUMBER")),m.Cb(2),m.gc("disabled",!t.createCompanyForm.valid),m.Cb(1),m.vc(" ",m.cc(56,50,"APP.CREATE_ACCOUNT.BUTTON.REGISTER")," "),m.Cb(5),m.vc(" ",m.cc(61,52,"APP.CREATE_ACCOUNT.PLACEHOLDER.OR")," "),m.Cb(5),m.vc(" ",m.cc(66,54,"APP.CREATE_ACCOUNT.PLACEHOLDER.ALREADY_A_MEMBER")," "),m.Cb(3),m.uc(m.cc(69,56,"APP.CREATE_ACCOUNT.BUTTON.SIGN_IN")),m.Cb(2),m.gc("ngIf",t.invalidMobilenumber),m.Cb(1),m.gc("ngIf",t.userExists))},directives:[i.g,c.i,i.z,d.a,i.u,r.j,i.e,n.s,n.n,n.g,i.l,i.h,i.B,n.m,n.e,n.q,i.r,i.A,i.s,r.i,n.i,n.j,i.o],pipes:[h.c],styles:[".google-btn[_ngcontent-%COMP%]{border-color:#507cc0;color:#507cc0!important}.fb-btn[_ngcontent-%COMP%], .google-btn[_ngcontent-%COMP%]{background-color:#fff}.fb-btn[_ngcontent-%COMP%]{border-color:#df4930;color:#df4930!important}.sign-or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:130px;border-top:1px solid #dee2e6}"]}),e})();const O=[{path:"",component:N}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({imports:[[c.j.forChild(O)],c.j]}),e})();const I=[r.b,n.h,i.v,n.p,c.j.forChild([{path:"",component:N}]),d.c,h.b,_],R=[];let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({providers:R,imports:[I]}),e})()}}]);