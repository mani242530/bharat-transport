(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"0qXx":function(e,t,o){"use strict";o.r(t),o.d(t,"SignUpPageModule",function(){return w});var r=o("ofXK"),n=o("3Pt+"),c=o("tyNb"),i=o("TEn/"),a=o("mrSG"),l=o("3ScB"),s=o("RPWk"),b=o("Jgta"),m=o("fXoL"),u=o("2g2N"),C=o("I/3d"),P=o("ej43"),p=o("+hHy"),E=o("6NWb"),d=o("sYmb");const f=["createForm"];function h(e,t){1&e&&m.Ob(0,"ion-progress-bar",35)}function A(e,t){if(1&e&&(m.Qb(0,"ion-select-option",36),m.bc(1,"translate"),m.bc(2,"translate"),m.tc(3),m.bc(4,"translate"),m.Pb()),2&e){const e=t.$implicit;m.hc("value",m.cc(1,3,e)),m.hc("title",m.cc(2,5,e)),m.Cb(3),m.uc(m.cc(4,7,e))}}function T(e,t){if(1&e&&(m.Qb(0,"ion-select-option",37),m.bc(1,"translate"),m.bc(2,"translate"),m.tc(3),m.bc(4,"translate"),m.Pb()),2&e){const e=t.$implicit;m.hc("value",m.cc(1,3,e.name)),m.hc("title",m.cc(2,5,e.name)),m.Cb(3),m.uc(m.cc(4,7,e.name))}}function g(e,t){if(1&e&&(m.Qb(0,"ion-select-option",37),m.bc(1,"translate"),m.bc(2,"translate"),m.tc(3),m.bc(4,"translate"),m.Pb()),2&e){const e=t.$implicit;m.hc("value",m.cc(1,3,e.name)),m.hc("title",m.cc(2,5,e.name)),m.Cb(3),m.uc(m.cc(4,7,e.name))}}function v(e,t){if(1&e&&(m.Qb(0,"ion-select-option",36),m.bc(1,"translate"),m.bc(2,"translate"),m.tc(3),m.bc(4,"translate"),m.Pb()),2&e){const e=t.$implicit;m.hc("value",m.cc(1,3,e)),m.hc("title",m.cc(2,5,e)),m.Cb(3),m.uc(m.cc(4,7,e))}}function O(e,t){1&e&&(m.Qb(0,"div",38),m.Qb(1,"p",39),m.tc(2),m.bc(3,"translate"),m.Pb(),m.Pb()),2&e&&(m.Cb(2),m.vc(" ",m.cc(3,1,"APP.CREATE_ACCOUNT.INVALID_MOBILE")," "))}function N(e,t){1&e&&(m.Qb(0,"div",38),m.Qb(1,"p",40),m.tc(2),m.bc(3,"translate"),m.Pb(),m.Pb()),2&e&&(m.Cb(2),m.vc(" ",m.cc(3,1,"APP.CREATE_ACCOUNT.MOBILE_EXISTS")," "))}let L=(()=>{class e{constructor(e,t,o,r,n,c,i){this.addnewFormbuilder=e,this.toastservice=t,this.ngroute=o,this.fbstore=r,this.toastController=n,this.authtenticationService=c,this.appservice=i,this.newCompany=new s.a,this.OTP="",this.CountryCode="+91",this.showOTPInput=!1,this.OTPmessage="An OTP is sent to your number. You should receive it in 15 s",this.showProgress=!1,this.invalidMobilenumber=!1,this.userExists=!1,this.vehicleTypes=["APP.VEHICLE_TYPE.LCV","APP.VEHICLE_TYPE.TRAILER","APP.VEHICLE_TYPE.TRUCK","APP.VEHICLE_TYPE.OPEN_TRUCK","APP.VEHICLE_TYPE.PART_LOAD","APP.VEHICLE_TYPE.ODC","APP.VEHICLE_TYPE.20_FT_CBT","APP.VEHICLE_TYPE.32_FT_SINGLE_EXCEL","APP.VEHICLE_TYPE.20_FT_IMPORT_EXPORT"],this.firmActivitys=["APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.FREIGHT","APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.BOOKING","APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.SUPPLIER","APP.CREATE_ACCOUNT.SELECT.FIRM_ACTIVITY.OWNER"],this.locations=[],this.serviceProvidedLocations=[]}ngOnInit(){const e=l.a;this.locations=e.sort((e,t)=>e.name>t.name?1:t.name>e.name?-1:0),this.serviceProvidedLocations=e.sort((e,t)=>e.name>t.name?1:t.name>e.name?-1:0),this.initializeForm()}initializeForm(){this.createCompanyForm=new n.f({companyName:new n.c("",n.r.required),ownerName:new n.c("",n.r.required),firmActivity:new n.c("",n.r.required),vehicleType:new n.c("",n.r.required),landlineNumber:new n.c(""),mobileNumber:new n.c("",n.r.required),alternateMobileNumber:new n.c(""),location:new n.c("",n.r.required),serviceProvidedLocation:new n.c("",n.r.required),referenceName:new n.c("",[n.r.required,n.r.pattern("^[a-zA-Z -']+")])})}ionViewDidEnter(){return Object(a.b)(this,void 0,void 0,function*(){this.recaptchaVerifier=new b.a.auth.RecaptchaVerifier("sign-UP-button",{size:"invisible",callback:e=>{},"expired-callback":()=>{}})})}ionViewDidLoad(){this.recaptchaVerifier=new b.a.auth.RecaptchaVerifier("sign-UP-button",{size:"invisible",callback:e=>{},"expired-callback":()=>{}})}createCompany(e){return Object(a.b)(this,void 0,void 0,function*(){this.showProgress=!0;const e={companyName:this.createCompanyForm.get("companyName").value,ownerName:this.createCompanyForm.get("ownerName").value,firmActivity:this.createCompanyForm.get("firmActivity").value,vehicleType:this.createCompanyForm.get("vehicleType").value,landlineNumber:this.createCompanyForm.get("landlineNumber").value,mobileNumber:"+91"+this.createCompanyForm.get("mobileNumber").value,alternateMobileNumber:"+91"+this.createCompanyForm.get("alternateMobileNumber").value,location:this.createCompanyForm.get("location").value,serviceProvidedLocation:this.createCompanyForm.get("serviceProvidedLocation").value,referenceName:this.createCompanyForm.get("referenceName").value,language:this.appservice.selectedLanguage,paymentStatus:"NOT PAID"};Object.keys(e).forEach(t=>{"object"!=typeof e[t]&&(e[t]=e[t].trim())}),this.fbstore.collection("companys",t=>t.where("mobileNumber","==",e.mobileNumber).limit(1)).get().subscribe(t=>{if(console.log(t.size),0===t.size)try{this.fbstore.collection("companys").add(e).then(t=>{if(console.log(e),t)return new Promise((t,o)=>{this.authtenticationService.signInWithPhoneNumber(this.recaptchaVerifier,e.mobileNumber).then(e=>{t(e),this.showProgress=!1,this.invalidMobilenumber=!1,this.registerSuccessToast(),this.ngroute.navigate(["verification"])}).catch(e=>{this.showProgress=!1,this.invalidMobilenumber=!0,o(e)})})})}catch(o){this.showProgress=!1,console.log(o)}else this.showProgress=!1,this.userRegisteredAlreadyToast(),this.userExists=!0})})}registerSuccessToast(){return Object(a.b)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Account created successfully.",duration:2e3,position:"bottom",animated:!0,color:"Success"})).present()})}userRegisteredAlreadyToast(){return Object(a.b)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Your mobile number is already registered.",duration:2e3,position:"top",animated:!0,color:"warning"})).present()})}}return e.\u0275fac=function(t){return new(t||e)(m.Nb(n.b),m.Nb(u.a),m.Nb(c.g),m.Nb(C.a),m.Nb(i.C),m.Nb(P.a),m.Nb(p.a))},e.\u0275cmp=m.Hb({type:e,selectors:[["app-signup"]],viewQuery:function(e,t){if(1&e&&m.xc(f,1),2&e){let e;m.lc(e=m.Zb())&&(t.createForm=e.first)}},decls:96,vars:54,consts:[[1,"osahan-header-nav","shadow-sm","p-3","d-flex","align-items-center","bg-purple"],[1,"font-weight-normal","mb-0","text-white"],["routerLink","/get-started",1,"text-purple"],["icon","arrow-left",1,"icofont-rounded-left"],["color","warning","type","indeterminate",4,"ngIf"],["id","content","fullscreen",""],["id","sign-UP-button"],[1,"osahan-index","bg-c","align-items-center","justify-content-center","vh-100","index-page"],[1,"px-3","py-3"],[3,"formGroup"],["createForm",""],[1,"form-group","mb-3"],[1,"text-muted","mb-1"],[1,"required-field"],["inputMode","text","clearInput","true","formControlName","companyName","required","",1,"form-control","rc-form-control","it-form-control"],["inputMode","text","clearInput","true","formControlName","ownerName","required","",1,"form-control","rc-form-control","it-form-control"],["interface","popover","role","combobox","slot","","formControlName","firmActivity","required","","placeholder","Select",1,"form-control","rc-form-control","native-select","it-form-control"],["selected","false",3,"value","title",4,"ngFor","ngForOf"],["interface","popover","formControlName","location","required","","placeholder","Select",1,"form-control","rc-form-control","native-select","it-form-control"],[3,"value","title",4,"ngFor","ngForOf"],["multiple","true","interface","popover","formControlName","serviceProvidedLocation","required","","placeholder","Select",1,"form-control","rc-form-control","native-select","it-form-control"],["multiple","true","formControlName","vehicleType","cancelText","cancel","okText","ok","required","","placeholder","Select",1,"form-control","rc-form-control","native-select","it-form-control"],["inputMode","tel","clearInput","true","formControlName","mobileNumber","required","","maxlength","10","minlength","10",1,"form-control","rc-form-control","it-form-control"],["inputMode","tel","clearInput","true","formControlName","alternateMobileNumber","maxlength","10","minlength","10",1,"form-control","rc-form-control","it-form-control"],["inputMode","tel","clearInput","true","formControlName","landlineNumber",1,"form-control","rc-form-control","it-form-control"],["inputMode","text","clearInput","true","formControlName","referenceName","type","text","required","",1,"form-control","rc-form-control","it-form-control"],["type","submit","slot","end","fill","clear",1,"btn","btn-purple","btn-block","osahanbus-btn","mt-2",3,"disabled","click"],[1,"sign-or","d-flex","align-items-center","justify-content-center","mt-4","mb-2"],[1,"mr-4"],[1,"text-muted","text-center","py-2","m-0"],[1,"ml-4"],[1,"osahan-signin","text-center","text-purple","p-1"],[1,"mb-3"],["routerLink","/signin",1,"text-orange","ml-2"],["class","osahan-signin text-center text-muted p-1",4,"ngIf"],["color","warning","type","indeterminate"],["selected","false",3,"value","title"],[3,"value","title"],[1,"osahan-signin","text-center","text-muted","p-1"],[1,"pt-2","text-danger"],[1,"pt-2","text-info"]],template:function(e,t){1&e&&(m.Qb(0,"ion-header"),m.Qb(1,"div",0),m.Qb(2,"h5",1),m.Qb(3,"a",2),m.Ob(4,"fa-icon",3),m.Pb(),m.Qb(5,"ion-title"),m.tc(6),m.bc(7,"translate"),m.Pb(),m.Pb(),m.Pb(),m.rc(8,h,1,0,"ion-progress-bar",4),m.Pb(),m.Qb(9,"ion-content",5),m.Ob(10,"div",6),m.Qb(11,"div",7),m.Qb(12,"div",8),m.Qb(13,"form",9,10),m.Qb(15,"ion-list"),m.Qb(16,"div",11),m.Qb(17,"ion-label",12),m.tc(18),m.bc(19,"translate"),m.Ob(20,"span",13),m.Pb(),m.Ob(21,"ion-input",14),m.Pb(),m.Qb(22,"div",11),m.Qb(23,"ion-label",12),m.tc(24),m.bc(25,"translate"),m.Ob(26,"span",13),m.Pb(),m.Ob(27,"ion-input",15),m.Pb(),m.Qb(28,"div",11),m.Qb(29,"ion-label",12),m.tc(30),m.bc(31,"translate"),m.Ob(32,"span",13),m.Pb(),m.Qb(33,"ion-select",16),m.rc(34,A,5,9,"ion-select-option",17),m.Pb(),m.Pb(),m.Qb(35,"div",11),m.Qb(36,"ion-label",12),m.tc(37),m.bc(38,"translate"),m.Ob(39,"span",13),m.Pb(),m.Qb(40,"ion-select",18),m.rc(41,T,5,9,"ion-select-option",19),m.Pb(),m.Pb(),m.Qb(42,"div",11),m.Qb(43,"ion-label",12),m.tc(44),m.bc(45,"translate"),m.Ob(46,"span",13),m.Pb(),m.Qb(47,"ion-select",20),m.rc(48,g,5,9,"ion-select-option",19),m.Pb(),m.Pb(),m.Qb(49,"div",11),m.Qb(50,"ion-label",12),m.tc(51),m.bc(52,"translate"),m.Ob(53,"span",13),m.Pb(),m.Qb(54,"ion-select",21),m.rc(55,v,5,9,"ion-select-option",17),m.Pb(),m.Pb(),m.Qb(56,"div",11),m.Qb(57,"ion-label",12),m.tc(58),m.bc(59,"translate"),m.Ob(60,"span",13),m.Pb(),m.Ob(61,"ion-input",22),m.Pb(),m.Qb(62,"div",11),m.Qb(63,"ion-label",12),m.tc(64),m.bc(65,"translate"),m.Pb(),m.Ob(66,"ion-input",23),m.Pb(),m.Qb(67,"div",11),m.Qb(68,"ion-label",12),m.tc(69),m.bc(70,"translate"),m.Pb(),m.Ob(71,"ion-input",24),m.Pb(),m.Qb(72,"div",11),m.Qb(73,"ion-label",12),m.tc(74),m.bc(75,"translate"),m.Ob(76,"span",13),m.Pb(),m.Ob(77,"ion-input",25),m.Pb(),m.Pb(),m.Qb(78,"button",26),m.Yb("click",function(){return t.createCompany(t.createCompanyForm.value)}),m.tc(79),m.bc(80,"translate"),m.Pb(),m.Pb(),m.Qb(81,"div",27),m.Ob(82,"hr",28),m.Qb(83,"p",29),m.tc(84),m.bc(85,"translate"),m.Pb(),m.Ob(86,"hr",30),m.Pb(),m.Qb(87,"div",31),m.Qb(88,"p",32),m.tc(89),m.bc(90,"translate"),m.Qb(91,"a",33),m.tc(92),m.bc(93,"translate"),m.Pb(),m.Pb(),m.Pb(),m.rc(94,O,4,3,"div",34),m.rc(95,N,4,3,"div",34),m.Pb(),m.Pb(),m.Pb()),2&e&&(m.Cb(6),m.uc(m.cc(7,24,"APP.CREATE_ACCOUNT.HEADER")),m.Cb(2),m.gc("ngIf",t.showProgress),m.Cb(5),m.gc("formGroup",t.createCompanyForm),m.Cb(5),m.uc(m.cc(19,26,"APP.CREATE_ACCOUNT.PLACEHOLDER.COMPANY_NAME")),m.Cb(6),m.uc(m.cc(25,28,"APP.CREATE_ACCOUNT.PLACEHOLDER.OWNER_NAME")),m.Cb(6),m.uc(m.cc(31,30,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_FIRM_ACTIVITY")),m.Cb(4),m.gc("ngForOf",t.firmActivitys),m.Cb(3),m.uc(m.cc(38,32,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_LOCATION")),m.Cb(4),m.gc("ngForOf",t.locations),m.Cb(3),m.uc(m.cc(45,34,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_SERVICE_PROVIDED_LOCATION")),m.Cb(4),m.gc("ngForOf",t.serviceProvidedLocations),m.Cb(3),m.uc(m.cc(52,36,"APP.CREATE_ACCOUNT.PLACEHOLDER.SELECT_VEHICLE_TYPE")),m.Cb(4),m.gc("ngForOf",t.vehicleTypes),m.Cb(3),m.uc(m.cc(59,38,"APP.CREATE_ACCOUNT.PLACEHOLDER.MOBILE_NUMBER")),m.Cb(6),m.uc(m.cc(65,40,"APP.CREATE_ACCOUNT.PLACEHOLDER.ALTERNATE_MOBILE_NUMBER")),m.Cb(5),m.uc(m.cc(70,42,"APP.CREATE_ACCOUNT.PLACEHOLDER.LANDLINE_NUMBER")),m.Cb(5),m.uc(m.cc(75,44,"APP.CREATE_ACCOUNT.PLACEHOLDER.REFERENCE_NAME")),m.Cb(4),m.gc("disabled",!t.createCompanyForm.valid),m.Cb(1),m.vc(" ",m.cc(80,46,"APP.CREATE_ACCOUNT.BUTTON.REGISTER")," "),m.Cb(5),m.vc(" ",m.cc(85,48,"APP.CREATE_ACCOUNT.PLACEHOLDER.OR")," "),m.Cb(5),m.vc(" ",m.cc(90,50,"APP.CREATE_ACCOUNT.PLACEHOLDER.ALREADY_A_MEMBER")," "),m.Cb(3),m.uc(m.cc(93,52,"APP.CREATE_ACCOUNT.BUTTON.SIGN_IN")),m.Cb(2),m.gc("ngIf",t.invalidMobilenumber),m.Cb(1),m.gc("ngIf",t.userExists))},directives:[i.g,c.i,i.z,E.a,i.u,r.j,i.e,n.s,n.n,n.g,i.l,i.k,i.h,i.B,n.m,n.e,n.q,i.r,i.A,r.i,n.i,n.j,i.n,i.s],pipes:[d.c],styles:[".google-btn[_ngcontent-%COMP%]{border-color:#507cc0;color:#507cc0!important}.fb-btn[_ngcontent-%COMP%], .google-btn[_ngcontent-%COMP%]{background-color:#fff}.fb-btn[_ngcontent-%COMP%]{border-color:#df4930;color:#df4930!important}.sign-or[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:130px;border-top:1px solid #dee2e6}"]}),e})();const _=[{path:"",component:L}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({imports:[[c.j.forChild(_)],c.j]}),e})();const y=[r.b,n.h,i.v,n.p,c.j.forChild([{path:"",component:L}]),E.c,d.b,R],I=[];let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Lb({type:e}),e.\u0275inj=m.Kb({providers:I,imports:[y]}),e})()}}]);