{"version":3,"sources":["./src/app/it-signin/it-signin.page.component.html","./src/app/it-signin/it-signin.routing.module.ts","./src/app/it-signin/it-signin.page.component.ts","./src/app/it-signin/it-signin.page.component.scss","./src/app/it-signin/it-signin.module.ts"],"names":[],"mappings":"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","file":"it-signin-it-signin-module.js","sourcesContent":["export default \"<ion-header>\\n  <!-- <ion-toolbar> -->\\n  <div\\n    class=\\\"osahan-header-nav shadow-sm p-3 d-flex align-items-center bg-purple\\\"\\n  >\\n    <h5 class=\\\"font-weight-normal mb-0 text-white\\\">\\n      <a class=\\\"text-purple\\\" routerLink=\\\"/get-started\\\"\\n        ><fa-icon icon=\\\"arrow-left\\\" class=\\\"icofont-rounded-left\\\"></fa-icon\\n      ></a>\\n      <ion-title>Sign In</ion-title>\\n    </h5>\\n  </div>\\n  <ion-progress-bar\\n    *ngIf=\\\"showProgress\\\"\\n    color=\\\"warning\\\"\\n    type=\\\"indeterminate\\\"\\n  ></ion-progress-bar>\\n  <!-- </ion-toolbar> -->\\n</ion-header>\\n\\n<ion-content id=\\\"content\\\" fullscreen>\\n  <!-- <cdk-virtual-scroll-viewport\\n    class=\\\"scroll-viewport\\\"\\n    #scroll\\n    itemSize=\\\"80\\\"\\n    minBufferPx=\\\"900\\\"\\n    maxBufferPx=\\\"1350\\\"\\n  > -->\\n  <div id=\\\"sign-in-button\\\"></div>\\n  <div\\n    class=\\\"\\n      osahan-index\\n      bg-c\\n      align-items-center\\n      justify-content-center\\n      vh-100\\n      index-page\\n      py-5\\n    \\\"\\n  >\\n    <div class=\\\"px-3\\\">\\n      <form [formGroup]=\\\"signInForm\\\" #signIn>\\n        <ion-list>\\n          <div class=\\\"form-group mb-4\\\">\\n            <ion-label class=\\\"text-muted mb-1\\\">Mobile Number</ion-label>\\n            <ion-input\\n              class=\\\"form-control rc-form-control it-form-control mt-4\\\"\\n              inputMode=\\\"tel\\\"\\n              clearInput=\\\"true\\\"\\n              formControlName=\\\"mobileNumber\\\"\\n              autofocus=\\\"true\\\"\\n              maxlength=\\\"10\\\"\\n              minlength=\\\"10\\\"\\n              placeholder=\\\"Enter 10 digit mobile number\\\"\\n            ></ion-input>\\n          </div>\\n        </ion-list>\\n        <button\\n          type=\\\"submit\\\"\\n          class=\\\"btn btn-purple btn-block osahanbus-btn mt-2\\\"\\n          slot=\\\"end\\\"\\n          fill=\\\"clear\\\"\\n          [disabled]=\\\"!signInForm.valid\\\"\\n          (click)=\\\"signinWithPhoneNumber(signInForm.value)\\\"\\n        >\\n          SIGN IN\\n        </button>\\n      </form>\\n\\n      <div\\n        class=\\\"\\n          sign-or\\n          d-flex\\n          align-items-center\\n          justify-content-center\\n          mt-4\\n          mb-2\\n        \\\"\\n      >\\n        <hr class=\\\"mr-4\\\" />\\n        <p class=\\\"text-muted text-center py-2 m-0\\\">OR</p>\\n        <hr class=\\\"ml-4\\\" />\\n      </div>\\n      <div class=\\\"osahan-signin text-center text-purple p-1\\\">\\n        <p class=\\\"m-0\\\">\\n          Not a member ?\\n          <a routerLink=\\\"/select-language\\\" class=\\\"text-orange ml-2\\\">Sign Up</a>\\n        </p>\\n      </div>\\n    </div>\\n    <div class=\\\"osahan-signin text-center p-1\\\" *ngIf=\\\"invalidMobilenumber\\\">\\n      <p class=\\\"m-5 pt-2 text-danger\\\">\\n        {{ tryagain }}\\n      </p>\\n    </div>\\n    <div class=\\\"osahan-signin text-center p-1\\\" *ngIf=\\\"mobileNumberNotFound\\\">\\n      <p class=\\\"m-5 pt-2 text-danger\\\">\\n        Sorry! Your mobile number is not registered with us. Please sign up to create account\\n      </p>\\n    </div>\\n  </div>\\n</ion-content>\\n\";","/***********************************\n * Copyright Fedex 1995 - 2021\n ***********************************/\nimport { NgModule } from \"@angular/core\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { SignInPageComponent } from \"./it-signin.page.component\";\n\n/**\n * Routes\n */\nconst routes: Routes = [\n  {\n    path: \"\", // path\n    component: SignInPageComponent, // component\n  },\n];\n\n/**\n * Ng module\n */\n@NgModule({\n  imports: [RouterModule.forChild(routes)], // imports\n  exports: [RouterModule], // exports\n})\n\n/**\n * SignInPageRoutingModule\n */\nexport class SignInPageRoutingModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  FormGroupDirective,\n  Validators,\n} from '@angular/forms';\nimport { AuthtenticationService } from '../services/authentication.service';\nimport firebase from 'firebase/app';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AppService } from '../services/app.servcie';\n\n@Component({\n  selector: 'app-signin',\n  templateUrl: './it-signin.page.component.html',\n  styleUrls: ['./it-signin.page.component.scss'],\n})\nexport class SignInPageComponent implements OnInit {\n  OTP: string = '';\n  Code: any;\n  PhoneNo: any;\n  CountryCode: any = '+91';\n  showOTPInput: boolean = false;\n  OTPmessage: string =\n    'An OTP is sent to your number. You should receive it in 15 s';\n  recaptchaVerifier: firebase.auth.RecaptchaVerifier;\n  confirmationResult: any;\n\n  showProgress = false;\n  invalidMobilenumber = false;\n  mobileNumberNotFound = false;\n  tryagain: string;\n  authfbObserver;\n\n  signInForm: FormGroup;\n  @ViewChild('signIn') signIn: FormGroupDirective;\n\n  constructor(\n    private router: Router,\n    private alertController: AlertController,\n    private formBuilder: FormBuilder,\n    private authtenticationService: AuthtenticationService,\n    public fbauth: AngularFireAuth,\n    private fbstore: AngularFirestore,\n    private appService: AppService\n  ) {}\n\n  ngOnInit() {\n    this.signInForm = new FormGroup({\n      mobileNumber: new FormControl('', Validators.required),\n    });\n  }\n\n  async ionViewDidEnter() {\n    this.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(\n      'sign-in-button',\n      {\n        size: 'invisible',\n        callback: (response) => {},\n        'expired-callback': () => {},\n      }\n    );\n  }\n\n  ionViewDidLoad() {\n    this.recaptchaVerifier = new firebase.auth.RecaptchaVerifier(\n      'sign-in-button',\n      {\n        size: 'invisible',\n        callback: (response) => {},\n        'expired-callback': () => {},\n      }\n    );\n  }\n\n  // Button event after the nmber is entered and button is clicked\n\n  signinWithPhoneNumber(formvalue) {\n    this.showProgress = true;\n    const mobileNumber = this.CountryCode + formvalue.mobileNumber\n    if (formvalue.mobileNumber.length === 10) {\n      this.authfbObserver = this.fbauth.authState.subscribe((user) => {\n        // if (user) {\n          this.fbstore\n            .collection('companys')\n            .snapshotChanges()\n            .subscribe((data) => {\n              const filteredUser = data.filter(\n                (result) =>\n                  result.payload.doc.data()['mobileNumber'] === mobileNumber\n              );\n              if(filteredUser.length > 0) {\n                console.log(filteredUser[0].payload.doc.data());\n                if (filteredUser[0].payload.doc.data()) {\n                  this.appService.docId = filteredUser[0].payload.doc.id;\n                  console.log(filteredUser[0].payload.doc.id);\n                  if (\n                    filteredUser[0].payload.doc.data()['paymentStatus'] === 'PAID'\n                  ) {\n                    console.log('user did pay');\n                    this.showProgress = false;\n                    this.mobileNumberNotFound = false;\n                   \n                    this.router.navigate(['/select-vehicle']);\n                  } else {\n                    console.log('user did not pay');\n                    this.showProgress = false;\n                    this.mobileNumberNotFound = false;\n                    this.router.navigate(['/payment']);\n                  }\n\n                } else {\n                  this.showProgress = false;\n                  this.mobileNumberNotFound = true;\n                  console.log('user not found in db');\n                }\n              } else {\n                this.showProgress = false;\n                this.mobileNumberNotFound = true;\n                console.log('user not found in db');\n              }\n              \n            });\n      });\n    }\n  }\n}\n","export default \"/* Button Styles */\\n.google-btn {\\n  background-color: #ffffff;\\n  border-color: #507cc0;\\n  color: #507cc0 !important;\\n}\\n.fb-btn {\\n  background-color: #ffffff;\\n  border-color: #df4930;\\n  color: #df4930 !important;\\n}\\n/* Signin */\\n.sign-or hr {\\n  width: 130px;\\n  border-top: 1px solid #dee2e6;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2l0LXNpZ25pbi5wYWdlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtCQUFBO0FBQ0E7RUFDRSx5QkFBQTtFQUNBLHFCQUFBO0VBQ0EseUJBQUE7QUFDRjtBQUNBO0VBQ0UseUJBQUE7RUFDQSxxQkFBQTtFQUNBLHlCQUFBO0FBRUY7QUFBQSxXQUFBO0FBQ0E7RUFDRSxZQUFBO0VBQ0EsNkJBQUE7QUFHRiIsImZpbGUiOiJpdC1zaWduaW4ucGFnZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEJ1dHRvbiBTdHlsZXMgKi9cbi5nb29nbGUtYnRuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgYm9yZGVyLWNvbG9yOiAjNTA3Y2MwO1xuICBjb2xvcjogIzUwN2NjMCAhaW1wb3J0YW50O1xufVxuLmZiLWJ0biB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gIGJvcmRlci1jb2xvcjogI2RmNDkzMDtcbiAgY29sb3I6ICNkZjQ5MzAgIWltcG9ydGFudDtcbn1cbi8qIFNpZ25pbiAqL1xuLnNpZ24tb3IgaHIge1xuICB3aWR0aDogMTMwcHg7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGVlMmU2O1xufVxuIl19 */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SignInPageComponent } from './it-signin.page.component';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { SignInPageRoutingModule } from './it-signin.routing.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignInPageComponent,\n  },\n];\n/**\n * MODULES\n */\nconst MODULES = [\n  CommonModule,\n  FormsModule,\n  IonicModule,\n  ReactiveFormsModule,\n  RouterModule.forChild(routes),\n  FontAwesomeModule,\n  SignInPageRoutingModule, // SignInPageRoutingModule\n];\n\n/**\n * COMPONENTS\n */\nconst COMPONENTS = [\n  SignInPageComponent, // SignInPageComponent\n];\n\n/**\n * PROVIDERS\n */\nconst PROVIDERS = [];\n\n/**\n * Ng module\n */\n@NgModule({\n  imports: MODULES,\n  exports: COMPONENTS,\n  declarations: COMPONENTS,\n  providers: PROVIDERS,\n})\nexport class SignInPageModule {}\n"],"sourceRoot":"webpack:///"}